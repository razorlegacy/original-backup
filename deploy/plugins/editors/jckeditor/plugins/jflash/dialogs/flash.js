(function(){var j=1,ATTRTYPE_PARAM=2,ATTRTYPE_EMBED=4;var k={id:[{type:j,name:CKEDITOR.env.ie?'_cke_saved_id':'id'}],classid:[{type:j,name:'classid'}],codebase:[{type:j,name:'codebase'}],pluginspage:[{type:ATTRTYPE_EMBED,name:'pluginspage'}],src:[{type:ATTRTYPE_PARAM,name:'movie'},{type:ATTRTYPE_EMBED,name:'src'}],name:[{type:ATTRTYPE_EMBED,name:'name'}],align:[{type:j,name:'align'}],title:[{type:j,name:'title'},{type:ATTRTYPE_EMBED,name:'title'}],'class':[{type:j,name:'class'},{type:ATTRTYPE_EMBED,name:'class'}],width:[{type:j,name:'width'},{type:ATTRTYPE_EMBED,name:'width'}],height:[{type:j,name:'height'},{type:ATTRTYPE_EMBED,name:'height'}],hSpace:[{type:j,name:'hSpace'},{type:ATTRTYPE_EMBED,name:'hSpace'}],vSpace:[{type:j,name:'vSpace'},{type:ATTRTYPE_EMBED,name:'vSpace'}],style:[{type:j,name:'style'},{type:ATTRTYPE_EMBED,name:'style'}],type:[{type:ATTRTYPE_EMBED,name:'type'}]};var l=['play','loop','menu','quality','scale','salign','wmode','bgcolor','base','flashvars','allowScriptAccess','allowFullScreen'];for(var i=0;i<l.length;i++)k[l[i]]=[{type:ATTRTYPE_EMBED,name:l[i]},{type:ATTRTYPE_PARAM,name:l[i]}];l=['allowFullScreen','play','loop','menu'];for(i=0;i<l.length;i++)k[l[i]][0]['default']=k[l[i]][1]['default']=true;function loadValue(a,b,c){var d=k[this.id];if(!d)return;var e=(this instanceof CKEDITOR.ui.dialog.checkbox);for(var i=0;i<d.length;i++){var f=d[i];switch(f.type){case j:if(!a)continue;if(a.getAttribute(f.name)!==null){var g=a.getAttribute(f.name);if(e)this.setValue(g.toLowerCase()=='true');else this.setValue(g);return}else if(e)this.setValue(!!f['default']);break;case ATTRTYPE_PARAM:if(!a)continue;if(f.name in c){g=c[f.name];if(e)this.setValue(g.toLowerCase()=='true');else this.setValue(g);return}else if(e)this.setValue(!!f['default']);break;case ATTRTYPE_EMBED:if(!b)continue;if(b.getAttribute(f.name)){g=b.getAttribute(f.name);if(e)this.setValue(g.toLowerCase()=='true');else this.setValue(g);return}else if(e)this.setValue(!!f['default'])}}}function commitValue(a,b,c){var d=k[this.id];if(!d)return;var e=(this.getValue()===''),isCheckbox=(this instanceof CKEDITOR.ui.dialog.checkbox);for(var i=0;i<d.length;i++){var f=d[i];switch(f.type){case j:if(!a)continue;var g=this.getValue();if(e||isCheckbox&&g===f['default'])a.removeAttribute(f.name);else a.setAttribute(f.name,g);break;case ATTRTYPE_PARAM:if(!a)continue;g=this.getValue();if(e||isCheckbox&&g===f['default']){if(f.name in c)c[f.name].remove()}else{if(f.name in c)c[f.name].setAttribute('value',g);else{var h=CKEDITOR.dom.element.createFromHtml('<cke:param></cke:param>',a.getDocument());h.setAttributes({name:f.name,value:g});if(a.getChildCount()<1)h.appendTo(a);else h.insertBefore(a.getFirst())}}break;case ATTRTYPE_EMBED:if(!b)continue;g=this.getValue();if(e||isCheckbox&&g===f['default'])b.removeAttribute(f.name);else b.setAttribute(f.name,g)}}}CKEDITOR.dialog.add('flash',function(f){var g=!f.config.flashEmbedTagOnly,makeEmbedTag=f.config.flashAddEmbedTag||f.config.flashEmbedTagOnly;var h='<div>'+CKEDITOR.tools.htmlEncode(f.lang.image.preview)+'<br>'+'<div id="FlashPreviewLoader" style="display:none"><div class="loading">&nbsp;</div></div>'+'<div id="FlashPreviewBox"></div></div>';return{title:f.lang.flash.title,minWidth:420,minHeight:310,onShow:function(){this.fakeImage=this.objectNode=this.embedNode=null;var a=this.getSelectedElement();if(a&&a.getAttribute('_cke_real_element_type')&&a.getAttribute('_cke_real_element_type')=='flash'){this.fakeImage=a;var b=f.restoreRealElement(a),objectNode=null,embedNode=null,paramMap={};if(b.getName()=='cke:object'){objectNode=b;var c=objectNode.getElementsByTag('embed','cke');if(c.count()>0)embedNode=c.getItem(0);var d=objectNode.getElementsByTag('param','cke');for(var i=0,length=d.count();i<length;i++){var e=d.getItem(i),name=e.getAttribute('name'),value=e.getAttribute('value');paramMap[name]=value}}else if(b.getName()=='cke:embed')embedNode=b;this.objectNode=objectNode;this.embedNode=embedNode;this.setupContent(objectNode,embedNode,paramMap,a)}},onOk:function(){var a=null,embedNode=null,paramMap=null;if(!this.fakeImage){if(g){a=CKEDITOR.dom.element.createFromHtml('<cke:object></cke:object>',f.document);var b={classid:'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000',codebase:'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0'};a.setAttributes(b)}if(makeEmbedTag){embedNode=CKEDITOR.dom.element.createFromHtml('<cke:embed></cke:embed>',f.document);embedNode.setAttributes({type:'application/x-shockwave-flash',pluginspage:'http://www.macromedia.com/go/getflashplayer'});if(a)embedNode.appendTo(a)}}else{a=this.objectNode;embedNode=this.embedNode}if(a){paramMap={};var c=a.getElementsByTag('param','cke');for(var i=0,length=c.count();i<length;i++)paramMap[c.getItem(i).getAttribute('name')]=c.getItem(i)}var d={};this.commitContent(a,embedNode,paramMap,d);var e=f.createFakeElement(a||embedNode,'cke_flash','flash',true);e.setStyles(d);if(this.fakeImage)e.replace(this.fakeImage);else f.insertElement(e)},onHide:function(){if(this.preview)this.preview.setHtml('')},contents:[{id:'info',label:f.lang.common.generalTab,accessKey:'I',elements:[{type:'vbox',padding:0,children:[{type:'html',html:'<span>'+CKEDITOR.tools.htmlEncode(f.lang.image.url)+'</span>'},{type:'hbox',widths:['280px','110px'],align:'right',children:[{id:'src',type:'text',label:'',validate:CKEDITOR.dialog.validate.notEmpty(f.lang.flash.validateSrc),setup:loadValue,commit:commitValue,onLoad:function(){var b=this.getDialog(),updatePreview=function(a){if(a.indexOf('://')==-1&&a.indexOf('/')!==0)a=f.config.baseHref+a;b.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(a)+'" type="application/x-shockwave-flash"></embed>')};b.preview=b.getContentElement('info','preview').getElement().getChild(3);this.on('change',function(a){if(a.data&&a.data.value)updatePreview(a.data.value)});this.getInputElement().on('change',function(a){updatePreview(this.getValue())},this)}},{type:'button',id:'browse',filebrowser:'info:src',hidden:true,align:'center',label:f.lang.common.browseServer}]}]},{type:'hbox',widths:['25%','25%','25%','25%','25%'],children:[{type:'text',id:'width',style:'width:95px',label:f.lang.flash.width,validate:CKEDITOR.dialog.validate.integer(f.lang.flash.validateWidth),setup:function(a,b,c,d){loadValue.apply(this,arguments);if(d){var e=parseInt(d.$.style.width,10);if(!isNaN(e))this.setValue(e)}},commit:function(a,b,c,d){commitValue.apply(this,arguments);if(this.getValue())d.width=this.getValue()+'px'}},{type:'text',id:'height',style:'width:95px',label:f.lang.flash.height,validate:CKEDITOR.dialog.validate.integer(f.lang.flash.validateHeight),setup:function(a,b,c,d){loadValue.apply(this,arguments);if(d){var e=parseInt(d.$.style.height,10);if(!isNaN(e))this.setValue(e)}},commit:function(a,b,c,d){commitValue.apply(this,arguments);if(this.getValue())d.height=this.getValue()+'px'}},{type:'text',id:'hSpace',style:'width:95px',label:f.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(f.lang.flash.validateHSpace),setup:loadValue,commit:commitValue},{type:'text',id:'vSpace',style:'width:95px',label:f.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(f.lang.flash.validateVSpace),setup:loadValue,commit:commitValue}]},{type:'vbox',children:[{type:'html',id:'preview',style:'width:95%;',html:h}]}]},{id:'Upload',hidden:true,filebrowser:'uploadButton',label:f.lang.common.upload,elements:[{type:'file',id:'upload',label:f.lang.common.upload,size:38},{type:'fileButton',id:'uploadButton',label:f.lang.common.uploadSubmit,filebrowser:'info:src','for':['Upload','upload']}]},{id:'properties',label:f.lang.flash.propertiesTab,elements:[{type:'hbox',widths:['50%','50%'],children:[{id:'scale',type:'select',label:f.lang.flash.scale,'default':'',style:'width : 100%;',items:[[f.lang.common.notSet,''],[f.lang.flash.scaleAll,'showall'],[f.lang.flash.scaleNoBorder,'noborder'],[f.lang.flash.scaleFit,'exactfit']],setup:loadValue,commit:commitValue},{id:'allowScriptAccess',type:'select',label:f.lang.flash.access,'default':'',style:'width : 100%;',items:[[f.lang.common.notSet,''],[f.lang.flash.accessAlways,'always'],[f.lang.flash.accessSameDomain,'samedomain'],[f.lang.flash.accessNever,'never']],setup:loadValue,commit:commitValue}]},{type:'hbox',widths:['50%','50%'],children:[{id:'wmode',type:'select',label:f.lang.flash.windowMode,'default':'',style:'width : 100%;',items:[[f.lang.common.notSet,''],[f.lang.flash.windowModeWindow,'window'],[f.lang.flash.windowModeOpaque,'opaque'],[f.lang.flash.windowModeTransparent,'transparent']],setup:loadValue,commit:commitValue},{id:'quality',type:'select',label:f.lang.flash.quality,'default':'high',style:'width : 100%;',items:[[f.lang.common.notSet,''],[f.lang.flash.qualityBest,'best'],[f.lang.flash.qualityHigh,'high'],[f.lang.flash.qualityAutoHigh,'autohigh'],[f.lang.flash.qualityMedium,'medium'],[f.lang.flash.qualityAutoLow,'autolow'],[f.lang.flash.qualityLow,'low']],setup:loadValue,commit:commitValue}]},{type:'hbox',widths:['50%','50%'],children:[{id:'align',type:'select',label:f.lang.flash.align,'default':'',style:'width : 100%;',items:[[f.lang.common.notSet,''],[f.lang.image.alignLeft,'left'],[f.lang.image.alignAbsBottom,'absBottom'],[f.lang.image.alignAbsMiddle,'absMiddle'],[f.lang.image.alignBaseline,'baseline'],[f.lang.image.alignBottom,'bottom'],[f.lang.image.alignMiddle,'middle'],[f.lang.image.alignRight,'right'],[f.lang.image.alignTextTop,'textTop'],[f.lang.image.alignTop,'top']],setup:loadValue,commit:commitValue},{type:'html',html:'<div></div>'}]},{type:'vbox',padding:0,children:[{type:'html',html:CKEDITOR.tools.htmlEncode(f.lang.flash.flashvars)},{type:'checkbox',id:'menu',label:f.lang.flash.chkMenu,'default':true,setup:loadValue,commit:commitValue},{type:'checkbox',id:'play',label:f.lang.flash.chkPlay,'default':true,setup:loadValue,commit:commitValue},{type:'checkbox',id:'loop',label:f.lang.flash.chkLoop,'default':true,setup:loadValue,commit:commitValue},{type:'checkbox',id:'allowFullScreen',label:f.lang.flash.chkFull,'default':true,setup:loadValue,commit:commitValue}]}]},{id:'advanced',label:f.lang.common.advancedTab,elements:[{type:'hbox',widths:['45%','55%'],children:[{type:'text',id:'id',label:f.lang.common.id,setup:loadValue,commit:commitValue},{type:'text',id:'title',label:f.lang.common.advisoryTitle,setup:loadValue,commit:commitValue}]},{type:'hbox',widths:['45%','55%'],children:[{type:'text',id:'bgcolor',label:f.lang.flash.bgcolor,setup:loadValue,commit:commitValue},{type:'text',id:'class',label:f.lang.common.cssClass,setup:loadValue,commit:commitValue}]},{type:'text',id:'style',label:f.lang.common.cssStyle,setup:loadValue,commit:commitValue}]}]}})})();